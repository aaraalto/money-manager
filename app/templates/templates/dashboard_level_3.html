{% extends "templates/layouts/base.html" %}
{% from "templates/components/atoms.html" import button, icon %}
{% from "templates/components/molecules.html" import card, stat, kpi_box, alert, dashboard_header with context %}

{% block title %}Radiant - Building Wealth{% endblock %}

{% block extra_js %}
<script type="module" src="/static/js/modules/main.js"></script>
{% endblock %}

{% block content %}
    {{ dashboard_header("Level 3: Building Wealth", "badge badge-primary", "", "", "", "Optimize Portfolio", "sliders") }}

    <div id="loading">Calculating your growth trajectory...</div>

    <div id="dashboard" class="hidden">
        <!-- Level 3 Focus: Investments & FI -->
        <div class="dashboard-overview">
             {% call card("Portfolio Performance", "trending-up") %}
                <div class="stat">
                    <div class="stat-label">Invested Assets</div>
                    <div class="stat-value text-primary-color" id="nw-invested">{{ format_currency(user.liquid_assets) }}</div>
                </div>
                <div class="separator"></div>
                <div class="kpi-row">
                    {{ kpi_box("Passive Income", value=format_currency(passive_income) ~ "/mo") }}
                    {{ kpi_box("FI Date", value=crossover_date) }}
                </div>
            {% endcall %}

            {% call card("Contribution Engine", "zap") %}
                 <div class="stat">
                     <div class="stat-label">Monthly Investment</div>
                     <div class="stat-value">{{ format_currency(monthly_contribution) }}</div>
                 </div>
                 {{ alert("On Track", "You are pacing ahead of the 4% rule.", "success") }}
            {% endcall %}
        </div>

        <div class="grid">
            <!-- Hero Chart: Compounding -->
            {% call card("Financial Independence Trajectory", "activity") %}
                <div class="chart-container" id="chart-projection"></div>
                <div class="reasoning">
                    The Crossover Point (where Passive Income > Expenses) is approaching.
                </div>
            {% endcall %}
        </div>
    </div>
{% endblock %}
