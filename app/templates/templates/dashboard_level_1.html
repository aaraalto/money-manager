{% extends "templates/layouts/base.html" %}
{% from "templates/components/atoms.html" import button, icon %}
{% from "templates/components/molecules.html" import card, stat, kpi_box, alert, dashboard_header %}

{% block title %}Radiant - Debt Resolution{% endblock %}

{% block extra_js %}
<script type="module" src="/static/js/modules/main.js"></script>
{% endblock %}

{% block content %}
    {% call dashboard_header("Level 1: Focus Mode", "badge badge-warning", "Systematic elimination of liabilities.", "", "", "Adjust Strategy", "sliders") %}
        {{ button("Simulate Strategy", "/simulator", "primary", "crosshair") }}
    {% endcall %}

    <div id="loading">Calculating payoff trajectory...</div>

    <div id="dashboard" class="hidden">
        <!-- Level 1 Focus: Debt Payoff -->
        <div class="dashboard-overview">
             {% call card("Debt Resolution Status", "shield") %}
                <div class="stat">
                    <div class="stat-label">Total Liabilities</div>
                    <div class="stat-value" id="nw-debt">--</div>
                </div>
                <div class="separator"></div>
                <div class="stat">
                     <div class="stat-label">Payoff Velocity</div>
                     <div class="stat-value text-success" id="payoff-velocity">--</div>
                     <div class="stat-change positive">per month</div>
                </div>
            {% endcall %}

            {% call card("Current Strategy", "crosshair") %}
                 {{ alert("Avalanche Method", "Targeting highest interest rate (24.99%) first to minimize loss.", "info") }}
                 <div class="kpi-row" style="margin-top: 1rem;">
                     {{ kpi_box("Freedom Date", id="freedom-date") }}
                     {{ kpi_box("Interest Saved", id="interest-saved") }}
                 </div>
            {% endcall %}
        </div>

        <div class="grid">
            <!-- Debt Payoff Chart is the Hero here -->
            {% call card("Freedom Trajectory", "trending-down") %}
                <div class="chart-container" id="chart-debt"></div>
                <div class="reasoning" id="debt-reasoning"></div>
            {% endcall %}
        </div>
    </div>
{% endblock %}
