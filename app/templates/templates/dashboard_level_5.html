{% extends "templates/layouts/base.html" %}
{% from "templates/components/atoms.html" import button, icon %}
{% from "templates/components/molecules.html" import card, stat, kpi_box, alert, dashboard_header with context %}

{% block title %}Radiant - Abundance{% endblock %}

{% block extra_js %}
<script type="module" src="/static/js/modules/main.js"></script>
{% endblock %}

{% block content %}
    {{ dashboard_header("Level 5: Abundance", "badge badge-primary", "Mastery and Legacy.", "", "", "Allocations", "pie-chart") }}

    <div id="loading">Retrieving portfolio...</div>

    <div id="dashboard" class="hidden">
        <div class="dashboard-overview">
             {% call card("Total Net Worth", "globe") %}
                <div class="stat">
                    <div class="stat-value text-gradient" style="font-size: 3.5rem;" id="nw-total">--</div>
                </div>
            {% endcall %}

            {% call card("Freedom Metrics", "sun") %}
                 <div class="kpi-row">
                     {{ kpi_box("Safe Withdrawal", value="$12,500/mo") }}
                     {{ kpi_box("Lifestyle Cost", value="$8,200/mo") }}
                 </div>
                 {{ alert("Infinite Solvency", "Passive income exceeds lifestyle cost by 150%.", "success") }}
            {% endcall %}
        </div>

        <div class="grid">
            {% call card("Asset Allocation", "pie-chart") %}
                <div class="chart-container" id="chart-allocation"></div>
            {% endcall %}
        </div>
    </div>
{% endblock %}
